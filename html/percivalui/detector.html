

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>detector Package &mdash; Percival 0.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Percival 0.0.0 documentation" href="../index.html" />
    <link rel="next" title="PercivalUI" href="percivalui.html" />
    <link rel="prev" title="User Guide" href="../userguide.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="percivalui.html" title="PercivalUI"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../userguide.html" title="User Guide"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Percival 0.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="detector-package">
<h1>detector Package<a class="headerlink" href="#detector-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2><a class="reference internal" href="#module-detector" title="detector"><tt class="xref py py-mod docutils literal"><span class="pre">detector</span></tt></a> package<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-detector"></span><p>The <a class="reference internal" href="#module-detector" title="detector"><tt class="xref py py-mod docutils literal"><span class="pre">detector</span></tt></a> module contain a number of interfaces and base classes 
to support development of python classes to control imaging detectors.</p>
</div>
<div class="section" id="module-detector.interface">
<span id="interface-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">interface</span></tt> module<a class="headerlink" href="#module-detector.interface" title="Permalink to this headline">¶</a></h2>
<p>The detector interface module contains a number of abstract interface definitions
which are to be implemented by classes that support control and communication
with detectors.</p>
<p>The interface classes do not implement any real functionality, but are used to define
the methods (and their args) and properties, required to support a certain
interface.</p>
<p>The interface classes rely on the python <a class="reference external" href="https://docs.python.org/2.7/library/abc.html#abc" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">abc</span></tt></a> module to support Abstract Base
Classes</p>
<div class="section" id="idetector-interface">
<h3><a class="reference internal" href="#detector.interface.IDetector" title="detector.interface.IDetector"><tt class="xref py py-class docutils literal"><span class="pre">IDetector</span></tt></a> interface<a class="headerlink" href="#idetector-interface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="detector.interface.IDetector">
<em class="property">class </em><tt class="descclassname">detector.interface.</tt><tt class="descname">IDetector</tt><a class="reference internal" href="../_modules/detector/interface.html#IDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#detector.interface.IDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#detector.interface.IABCMeta" title="detector.interface.IABCMeta"><tt class="xref py py-class docutils literal"><span class="pre">detector.interface.IABCMeta</span></tt></a></p>
<p>Abstract Interface to a detector class</p>
<dl class="method">
<dt id="detector.interface.IDetector.acquire">
<tt class="descname">acquire</tt><big>(</big><em>exposure</em>, <em>nframes</em><big>)</big><a class="reference internal" href="../_modules/detector/interface.html#IDetector.acquire"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#detector.interface.IDetector.acquire" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the detector acquiring data</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="icontrol-interface">
<h3><a class="reference internal" href="#detector.interface.IControl" title="detector.interface.IControl"><tt class="xref py py-class docutils literal"><span class="pre">IControl</span></tt></a> interface<a class="headerlink" href="#icontrol-interface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="detector.interface.IControl">
<em class="property">class </em><tt class="descclassname">detector.interface.</tt><tt class="descname">IControl</tt><a class="reference internal" href="../_modules/detector/interface.html#IControl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#detector.interface.IControl" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#detector.interface.IABCMeta" title="detector.interface.IABCMeta"><tt class="xref py py-class docutils literal"><span class="pre">detector.interface.IABCMeta</span></tt></a></p>
</dd></dl>

</div>
<div class="section" id="idata-interface">
<h3><a class="reference internal" href="#detector.interface.IData" title="detector.interface.IData"><tt class="xref py py-class docutils literal"><span class="pre">IData</span></tt></a> interface<a class="headerlink" href="#idata-interface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="detector.interface.IData">
<em class="property">class </em><tt class="descclassname">detector.interface.</tt><tt class="descname">IData</tt><a class="reference internal" href="../_modules/detector/interface.html#IData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#detector.interface.IData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#detector.interface.IABCMeta" title="detector.interface.IABCMeta"><tt class="xref py py-class docutils literal"><span class="pre">detector.interface.IABCMeta</span></tt></a></p>
<dl class="method">
<dt id="detector.interface.IData.start_capture">
<tt class="descname">start_capture</tt><big>(</big><em>filename</em>, <em>nframes</em><big>)</big><a class="reference internal" href="../_modules/detector/interface.html#IData.start_capture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#detector.interface.IData.start_capture" title="Permalink to this definition">¶</a></dt>
<dd><p>Start capturing data frames into a filename.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> &#8211; Name of file to capture and store frames in.</li>
<li><strong>nframes</strong> &#8211; Numbef of frames, expected to be acquired and stored.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="detector.interface.IData.wait_complete">
<tt class="descname">wait_complete</tt><big>(</big><em>timeout</em><big>)</big><a class="reference internal" href="../_modules/detector/interface.html#IData.wait_complete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#detector.interface.IData.wait_complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait and return once the current capture session has completed.
This function will return when the required number of frames has been captured
into the file - or throw Timeout exception after a timeout.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>timeout</strong> &#8211; Number of seconds to block before timing out.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="iparameter-interface">
<h3><a class="reference internal" href="#detector.interface.IParameter" title="detector.interface.IParameter"><tt class="xref py py-class docutils literal"><span class="pre">IParameter</span></tt></a> interface<a class="headerlink" href="#iparameter-interface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="detector.interface.IParameter">
<em class="property">class </em><tt class="descclassname">detector.interface.</tt><tt class="descname">IParameter</tt><a class="reference internal" href="../_modules/detector/interface.html#IParameter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#detector.interface.IParameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Base class interface to describe a detector parameter</p>
<p>The <tt class="xref py py-obj docutils literal"><span class="pre">value</span></tt> object is a <a class="reference internal" href="#detector.parameter.Observable" title="detector.parameter.Observable"><tt class="xref py py-class docutils literal"><span class="pre">detector.parameter.Observable</span></tt></a> instance 
to which callbacks can be registerred to provide notification updates</p>
</dd></dl>

</div>
<div class="section" id="iabcmeta-mix-in">
<h3><a class="reference internal" href="#detector.interface.IABCMeta" title="detector.interface.IABCMeta"><tt class="xref py py-class docutils literal"><span class="pre">IABCMeta</span></tt></a> mix-in<a class="headerlink" href="#iabcmeta-mix-in" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="detector.interface.IABCMeta">
<em class="property">class </em><tt class="descclassname">detector.interface.</tt><tt class="descname">IABCMeta</tt><a class="reference internal" href="../_modules/detector/interface.html#IABCMeta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#detector.interface.IABCMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Abstract Base Meta Class which implements checking for required methods and
properties, even when the class is not directly subclassed.
The Interface class which uses this metaclass will need to define a property
called <a class="reference internal" href="#detector.interface.IABCMeta._iface_requirements" title="detector.interface.IABCMeta._iface_requirements"><tt class="xref py py-attr docutils literal"><span class="pre">_iface_requirements</span></tt></a> which is a list of properties that must be implemented.</p>
<p>This class is intended to work together with the <a class="reference external" href="https://docs.python.org/2.7/library/abc.html#abc.ABCMeta" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">abc.ABCMeta</span></tt></a> class:
Subclass <a class="reference internal" href="#detector.interface.IABCMeta" title="detector.interface.IABCMeta"><tt class="xref py py-class docutils literal"><span class="pre">IABCMeta</span></tt></a> into your own class and set the <tt class="xref py py-const docutils literal"><span class="pre">__metaclass__</span></tt> = <a class="reference external" href="https://docs.python.org/2.7/library/abc.html#abc.ABCMeta" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">abc.ABCMeta</span></tt></a>
The <a class="reference internal" href="#detector.interface.IABCMeta.__subclasshook__" title="detector.interface.IABCMeta.__subclasshook__"><tt class="xref py py-meth docutils literal"><span class="pre">__subclasshook__()</span></tt></a> will automatically be called when a class
interface need to be verified.</p>
<dl class="attribute">
<dt id="detector.interface.IABCMeta._iface_requirements">
<tt class="descname">_iface_requirements</tt><em class="property"> = []</em><a class="headerlink" href="#detector.interface.IABCMeta._iface_requirements" title="Permalink to this definition">¶</a></dt>
<dd><p>Interface requirements list. The memebers listed here must be implemented
by subclasses</p>
</dd></dl>

<dl class="classmethod">
<dt id="detector.interface.IABCMeta.__subclasshook__">
<em class="property">classmethod </em><tt class="descname">__subclasshook__</tt><big>(</big><em>C</em><big>)</big><a class="reference internal" href="../_modules/detector/interface.html#IABCMeta.__subclasshook__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#detector.interface.IABCMeta.__subclasshook__" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through the <a class="reference internal" href="#detector.interface.IABCMeta._iface_requirements" title="detector.interface.IABCMeta._iface_requirements"><tt class="xref py py-attr docutils literal"><span class="pre">_iface_requirements</span></tt></a> list of members and check
whether they are implemented by the current class or parent.</p>
<p>For requirement functions:
Check if the functions arguments match the required arguments
of the interface function.</p>
<dl class="docutils">
<dt>Rules for implementation of interface functions:</dt>
<dd><ol class="first last arabic simple">
<li>Must have at least the main (non-defaulted) named args</li>
<li>Can extend the list of arguments</li>
</ol>
</dd>
</dl>
<p>Default value arguments are discouraged in interfaces as the
interface does not implement any functionality. Implementations
can assign default values to the arguments if desired.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="example-use-of-interfaces">
<h3>Example use of interfaces<a class="headerlink" href="#example-use-of-interfaces" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">detector.interface</span> <span class="kn">import</span> <span class="n">IDetector</span>

<span class="k">class</span> <span class="nc">MyDetector</span><span class="p">(</span> <span class="nb">object</span> <span class="p">):</span>
    <span class="n">exposure</span> <span class="o">=</span> <span class="mf">0.1</span>
    <span class="k">def</span> <span class="nf">acquire</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">exposure</span><span class="p">,</span> <span class="n">nframes</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">dac</span><span class="o">=</span><span class="mi">42</span> <span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;Acquiring...&quot;</span>

<span class="c"># Register MyDetector to as implementing the IDetector interface</span>
<span class="n">IDetector</span><span class="o">.</span><span class="n">register</span><span class="p">(</span> <span class="n">MyDetector</span> <span class="p">)</span>

<span class="c"># Verify the implementation of the IDetector interface in MyDetector</span>
<span class="k">print</span> <span class="s">&quot;MyDetector provides IDetector: &quot;</span><span class="p">,</span> <span class="nb">issubclass</span><span class="p">(</span> <span class="n">MyDetector</span><span class="p">,</span> <span class="n">IDetector</span> <span class="p">)</span>        

<span class="c"># Create an instance of MyDetector</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">MyDetector</span><span class="p">()</span>

<span class="c"># Verify that the det object implements the IDetector interface</span>
<span class="k">print</span> <span class="s">&quot;det implements IDetector: &quot;</span><span class="p">,</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">det</span><span class="p">,</span> <span class="n">IDetector</span> <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="module-detector.parameter">
<span id="parameter-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">parameter</span></tt> module<a class="headerlink" href="#module-detector.parameter" title="Permalink to this headline">¶</a></h2>
<p>Support for observable parameters.
When using <a class="reference internal" href="#detector.parameter.Observable" title="detector.parameter.Observable"><tt class="xref py py-class docutils literal"><span class="pre">Observable</span></tt></a> it is possible to register observers
for notifications (callbacks) on change of data values.</p>
<p>The implementation is thread safe by using python threading locks.</p>
<div class="section" id="observable">
<h3><a class="reference internal" href="#detector.parameter.Observable" title="detector.parameter.Observable"><tt class="xref py py-class docutils literal"><span class="pre">Observable</span></tt></a><a class="headerlink" href="#observable" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="detector.parameter.Observable">
<em class="property">class </em><tt class="descclassname">detector.parameter.</tt><tt class="descname">Observable</tt><big>(</big><em>name</em><big>)</big><a class="reference internal" href="../_modules/detector/parameter.html#Observable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#detector.parameter.Observable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>An observable implemented as a <a class="reference external" href="https://docs.python.org/2/howto/descriptor.html">python Descriptor</a>.</p>
<p>Use the <a class="reference internal" href="#detector.parameter.Observable.subscribe" title="detector.parameter.Observable.subscribe"><tt class="xref py py-func docutils literal"><span class="pre">Observable.subscribe()</span></tt></a> to register for notification updates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note :</th><td class="field-body">The business logic is deferred to the <tt class="xref py py-class docutils literal"><span class="pre">Observable.__ObservableValue__</span></tt> class
in <tt class="xref py py-obj docutils literal"><span class="pre">self.observable_value</span></tt>.</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="detector.parameter.Observable._NotifySubscription">
<em class="property">class </em><tt class="descname">_NotifySubscription</tt><big>(</big><em>subscriber</em>, <em>observable</em><big>)</big><a class="reference internal" href="../_modules/detector/parameter.html#Observable._NotifySubscription"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#detector.parameter.Observable._NotifySubscription" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>A subscription class which cancels the notifications to the subscriber
when instances of this class are finalised.</p>
<p>There is no need to directly instansiate or operate on insatances of this class.</p>
</dd></dl>

<dl class="method">
<dt id="detector.parameter.Observable.subscribe">
<tt class="descclassname">Observable.</tt><tt class="descname">subscribe</tt><big>(</big><em>obsv</em>, <em>exception_handler=None</em><big>)</big><a class="reference internal" href="../_modules/detector/parameter.html#Observable.subscribe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#detector.parameter.Observable.subscribe" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a subscriber to be notified on change of value in the Observable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>obsv</strong> (a callable or another <a class="reference internal" href="#detector.parameter.Observable" title="detector.parameter.Observable"><tt class="xref py py-class docutils literal"><span class="pre">Observable</span></tt></a> object. 
The callable must accept one argument which is the updated value.) &#8211; Observer to be notified of change.</li>
<li><strong>exception_handler</strong> (<em>callable with one argument which is the raised exception</em>) &#8211; An exception handler or None</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#detector.parameter.Observable._NotifySubscription" title="detector.parameter.Observable._NotifySubscription"><tt class="xref py py-class docutils literal"><span class="pre">Observable._NotifySubscription</span></tt></a> object. Hang on to this object
for as long as notification updates are required. When this object is finalised,
the notification updates will be cancelled.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/PERCIVAL-logo.jpg" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">detector Package</a><ul>
<li><a class="reference internal" href="#id1"><tt class="docutils literal"><span class="pre">detector</span></tt> package</a></li>
<li><a class="reference internal" href="#module-detector.interface"><tt class="docutils literal"><span class="pre">interface</span></tt> module</a><ul>
<li><a class="reference internal" href="#idetector-interface"><tt class="docutils literal"><span class="pre">IDetector</span></tt> interface</a></li>
<li><a class="reference internal" href="#icontrol-interface"><tt class="docutils literal"><span class="pre">IControl</span></tt> interface</a></li>
<li><a class="reference internal" href="#idata-interface"><tt class="docutils literal"><span class="pre">IData</span></tt> interface</a></li>
<li><a class="reference internal" href="#iparameter-interface"><tt class="docutils literal"><span class="pre">IParameter</span></tt> interface</a></li>
<li><a class="reference internal" href="#iabcmeta-mix-in"><tt class="docutils literal"><span class="pre">IABCMeta</span></tt> mix-in</a></li>
<li><a class="reference internal" href="#example-use-of-interfaces">Example use of interfaces</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-detector.parameter"><tt class="docutils literal"><span class="pre">parameter</span></tt> module</a><ul>
<li><a class="reference internal" href="#observable"><tt class="docutils literal"><span class="pre">Observable</span></tt></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../userguide.html"
                        title="previous chapter">User Guide</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="percivalui.html"
                        title="next chapter">PercivalUI</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/percivalui/detector.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="percivalui.html" title="PercivalUI"
             >next</a> |</li>
        <li class="right" >
          <a href="../userguide.html" title="User Guide"
             >previous</a> |</li>
        <li><a href="../index.html">Percival 0.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Ulrik Kofoed Pedersen, Diamond Light Source Ltd..
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>